---

- name: Setting the requirements for redis cluster
  include_tasks: cluster_pre_setup.yaml

- name: Generating certificates for redis cluster
  include_tasks: cluster_certificate_generation.yaml
  delegate_to: "{{ ansible_play_hosts_all[0] }}"

- name: Setting up the cluster
  include_tasks: cluster_setup_dockerized.yaml

- name: Initializing the cluster
  include_tasks: cluster_init.yaml
  delegate_to: "{{ ansible_play_hosts_all[0] }}"

- name: Set up the redis exporter
  include_tasks: exporter_setup.yaml
